<!DOCTYPE html>
<html lang="ko" class="__layout_modal__">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="format-detection" content="telephone=no, address=no, email=no">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">

	<link rel='shortcut icon' href="https://img.nstationmall.com/mall/ui/pc/common/favicon.ico">

	<!-- 소셜태그 -->
	<meta property="og:title" content="">
	<meta property="og:description" content="">
	<meta property="og:image" content="">
	<meta property="og:url" content="">
	<meta property="og:site_name" content="">
	<!--// 소셜태그 -->

	<title>(모달) 폴더 수정하기 - N.STATION</title>

	<!-- 공통 css -->
	<link rel="stylesheet" href="../css/app.css">

	<!-- (D) 폴리필/라이브러리는 요청을 줄이기 위해 combind + minify를 적용해주세요. -->
	<!-- 폴리필/라이브러리 스크립트 -->
	<script src="../js/polyfill/babel-polyfill-7.12.1.min.js"></script>
	<script src="../js/polyfill/dom4-2.1.5.min.js"></script>
	<script src="../js/polyfill/fetch.umd-3.6.2.min.js"></script>
	<script src="../js/polyfill/intersection-observer-0.12.0.min.js"></script>
	<script src="../js/polyfill/resize-observer-1.5.1.min.js"></script>
	<script src="../js/polyfill/webcomponents-ce-2.6.0.min.js"></script>
	<script src="../js/lib/lodash-4.17.21.min.js"></script>
	<script src="../js/lib/gsap-3.6.1/gsap.min.js"></script>
	<script src="../js/lib/axios-0.21.1.min.js"></script>
	<script src="../js/lib/load-image.all-5.14.0.min.js"></script>
	<script src="../js/lib/sortable-1.13.0.min.js"></script>

	<!-- 공통 선언 스크립트 -->
	<script src="../js/app_common.js"></script>
	<script src="../js/app_page-common.js"></script>

	<!-- (D) 페이지 공통 스크립트는 body 하단, 전용 스크립트는 .mm_page-content 하단에 넣어주세요. -->
</head>
<body>
	<div id="mm_app" class="mm_app">
		<!-- 스킵 -->
		<nav class="mm_skip">
			<ul>
				<li><a href="#mm_body" data-href="{ '_type': 'anchor' }">본문바로가기</a></li>
			</ul>
		</nav>
		<!-- 스킵 -->

		<!-- 화면 -->
		<div class="mm_view">
			<!-- 헤더 -->
			<div class="mm_header">
				<h1><b>폴더 수정하기</b></h1>
				<button type="button" class="btn_modal-close" onclick="mm.modal.close();"><i class="mco_modal-close"></i><b class="mm_ir-blind">모달 닫기</b></button>
			</div>
			<!--// 헤더 -->

			<!-- 내용 -->
			<div id="mm_body" class="mm_page">
				<!--
					(D) 실제 내용을 추가하는 부분입니다.
					모달은 html 요소에 '__layout_modal__' 클래스를 추가합니다.
				-->

				<div class="mm_scroller">
					<!-- 본문 -->
					<div class="mm_page-content">
						<form>
							<div class="m_modal-my-folder">
								<div class="m__folder-head">
									<div class="mm_lside">
										<button type="button" class="btn_add-folder" onclick="mm.bom.prompt('', null, { _title: '새 폴더 추가하기' });"><i class="mco_add"></i><b>새 폴더 추가하기</b></button>
										<p class="text_sort"><i class="mco_sort"></i>를 드래그하여 원하는 위치로 옮기세요</p>
									</div>
									<div class="mm_rside">
										<div class="mm_btnbox">
											<button type="button" class="mm_btn __btn_xs_line__ btn_sort-edit"><i class="mco_modify"></i><b>순서편집</b></button>
											<button type="button" class="mm_btn __btn_xs_primary__ btn_sort-complete"><b>저장</b></button>
											<button type="button" class="mm_btn __btn_xs_line__ btn_sort-cancel"><i class="mco_modify"></i><b>편집취소</b></button>
										</div>
									</div>
								</div>
								<ul>
									<li>
										<button type="button" class="btn_sort-handler"><i class="mco_sort"></i><b class="mm_ir-blind">순서이동</b></button>
										<i class="mm_bg-cover image_product" data-lazyload="{ '_src': '../image/_sample/prod_x1_1.png' }"></i>
										<p class="text_folder">기본폴더<small>10</small></p>
										<div class="mm_btnbox">
											<button type="button" class="mm_btn btn_dropdown __btn_xs_line_light__" onclick="mm.bom.prompt('', null, { _title: '폴더 이름 변경', forms: [{ _placeholder: '한 글자 이상 입력하세요' }] });"><b>수정</b></button>
											<button type="button" class="btn_remove" onclick="mm.bom.confirm('폴더를 삭제하시겠습니까?<br>삭제된 폴더는 복구할 수 없습니다');"><i class="mco_remove"></i><b class="mm_ir-blind">폴더 삭제</b></button>
										</div>
									</li>
									<li>
										<button type="button" class="btn_sort-handler"><i class="mco_sort"></i><b class="mm_ir-blind">순서이동</b></button>
										<i class="mco_like"></i>
										<p class="text_folder">내맘대로<small>20</small></p>
										<div class="mm_btnbox">
											<button type="button" class="mm_btn btn_dropdown __btn_xs_line_light__" onclick="mm.bom.prompt('', null, { _title: '폴더 이름 변경', forms: [{ _placeholder: '한 글자 이상 입력하세요' }] });"><b>수정</b></button>
											<button type="button" class="btn_remove" onclick="mm.bom.confirm('폴더를 삭제하시겠습니까?<br>삭제된 폴더는 복구할 수 없습니다');"><i class="mco_remove"></i><b class="mm_ir-blind">폴더 삭제</b></button>
										</div>
									</li>
									<li>
										<button type="button" class="btn_sort-handler"><i class="mco_sort"></i><b class="mm_ir-blind">순서이동</b></button>
										<i class="mco_like"></i>
										<p class="text_folder">구매각<small>10</small></p>
										<div class="mm_btnbox">
											<button type="button" class="mm_btn btn_dropdown __btn_xs_line_light__" onclick="mm.bom.prompt('', null, { _title: '폴더 이름 변경', forms: [{ _placeholder: '한 글자 이상 입력하세요' }] });"><b>수정</b></button>
											<button type="button" class="btn_remove" onclick="mm.bom.confirm('폴더를 삭제하시겠습니까?<br>삭제된 폴더는 복구할 수 없습니다');"><i class="mco_remove"></i><b class="mm_ir-blind">폴더 삭제</b></button>
										</div>
									</li>
									<li>
										<button type="button" class="btn_sort-handler"><i class="mco_sort"></i><b class="mm_ir-blind">순서이동</b></button>
										<i class="mm_bg-cover image_product" data-lazyload="{ '_src': '../image/_sample/prod_x1_2.png' }"></i>
										<p class="text_folder">살까말까고민중<small>110</small></p>
										<div class="mm_btnbox">
											<button type="button" class="mm_btn btn_dropdown __btn_xs_line_light__" onclick="mm.bom.prompt('', null, { _title: '폴더 이름 변경', forms: [{ _placeholder: '한 글자 이상 입력하세요' }] });"><b>수정</b></button>
											<button type="button" class="btn_remove" onclick="mm.bom.confirm('폴더를 삭제하시겠습니까?<br>삭제된 폴더는 복구할 수 없습니다');"><i class="mco_remove"></i><b class="mm_ir-blind">폴더 삭제</b></button>
										</div>
									</li>
									<li>
										<button type="button" class="btn_sort-handler"><i class="mco_sort"></i><b class="mm_ir-blind">순서이동</b></button>
										<i class="mm_bg-cover image_product" data-lazyload="{ '_src': '../image/_sample/prod_x1_3.png' }"></i>
										<p class="text_folder">월급들어오면<small>55</small></p>
										<div class="mm_btnbox">
											<button type="button" class="mm_btn btn_dropdown __btn_xs_line_light__" onclick="mm.bom.prompt('', null, { _title: '폴더 이름 변경', forms: [{ _placeholder: '한 글자 이상 입력하세요' }] });"><b>수정</b></button>
											<button type="button" class="btn_remove" onclick="mm.bom.confirm('폴더를 삭제하시겠습니까?<br>삭제된 폴더는 복구할 수 없습니다');"><i class="mco_remove"></i><b class="mm_ir-blind">폴더 삭제</b></button>
										</div>
									</li>
								</ul>
							</div>
							<input hidden>
						</form>
					</div>
					<!--// 본문 -->
				</div>

				<!-- 현재 페이지 스크립트 -->
				<!-- <script src="../js/.js"></script> -->
				<script>
					(function () {
						//< 순서변경
						mm.event.on('[class*="btn_sort-"]', 'click', function (__e) {

							__e.preventDefault();

							var $el = this.closest('.m_modal-my-folder');
							if (this.classList.contains('btn_sort-handler') || !$el) return;

							var $sortableList = mm.find('ul', $el)[0];
							var _classSort = '__folder-sortable';
							var _classChanged = '__sortable-changed';// 순서 변경된 요소에 추가되는 클래스

							// 초기화
							function sortableReset() {

								$el.classList.remove(_classSort);

								var data = mm.data.get($el);
								data.sortable.destroy();
								delete data.sortable;

							}

							// 순서편집
							if (this.classList.contains('btn_sort-edit')) {
								$el.classList.add(_classSort);
								mm.data.get($el).sortable = Sortable.create($sortableList, {
									forceFallback: true,
									handle: '.btn_sort-handler',
									onEnd: function (__e) { __e.item.classList.add(_classChanged); },
								});

								_.forEach(mm.find('li', $sortableList), function (__$li, __index) {

									__$li.dataset.sortIndex = __index;

								});

								var $changedItems = mm.find(mm.selector(_classChanged, '.'));
								if ($changedItems.length !== 0) mm.class.remove($changedItems, _classChanged);
							}
							else {
								// 순서편집 취소
								if (this.classList.contains('btn_sort-cancel')) {
									var $sortableItems = $sortableList.children;
									$sortableItems = _.sortBy($sortableItems, [function (__$el) { return __$el.dataset.sortIndex; }]);
									mm.element.append($sortableList, $sortableItems);
								}

								sortableReset();
							}

						});
						//> 순서변경
					})();
				</script>
			</div>
			<!--// 내용 -->
		</div>
		<!--// 화면 -->
	</div>
</body>
</html>
